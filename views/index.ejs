<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Lista de Registros</title>
<link rel="stylesheet" href="/css/index.css">
</head>
<body>
<div class="container">
    <div class="left">
        <h2>Registros</h2>
        <button class="btn" onclick="location.href='/cadastro'">
            Cadastrar Novo
        </button>
        <table id="tabela">
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Email</th>
                <th>Telefone</th>
                <th>CPF</th>
                <th>Data de Nascimento</th>
                <th></th>
            </tr>   
            <% usuarios.forEach(usuario =>{ %>
                <tr>
                    <td><%= usuario.id %></td>
                    <td><%= usuario.nome %></td>
                    <td><%= usuario.email %></td>
                    <td><%= usuario.telefone %></td>
                    <td><%= usuario.cpf %></td>
                    <td><%= usuario.data_nascimento %></td>
                    <td>
                        <form action="/alteracao/<%= usuario.id %>" method="post">
                            <button class="btn" onclick="location.href='/alteracao:<%= usuario.id %>'">Editar</button>
                        </form>
                        <form action="/deletar/<%= usuario.id %>" method="post">
                            <button class="btn">Excluir</button>
                        </form>
                    </td>
                </tr>
                <% }) %>

            </table>
    </div>
</div>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    if(urlParams.get('msg') === 'sucesso') {
        alert("Operação realizada com sucesso!");
    }
</script>
</body>
</html>